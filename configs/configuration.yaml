homeassistant:
  name: Llwyn-y-Gorras
  latitude: !secret location_latitude
  longitude: !secret location_longitude
  elevation: 3
  unit_system: metric
  time_zone: Europe/London
  customize: !include customize.yaml
  auth_providers:
   - type: homeassistant
#   - type: trusted_networks

http:
  use_x_forwarded_for: true
  trusted_proxies:
    - 127.0.0.1
    - ::1
    - 172.17.0.1
    - 10.76.200.14

mobile_app:

cloud:
  alexa:
    filter:
      exclude_domains:
        - group

config:

recorder:
  purge_keep_days: 14

sensor: !include sensors.yaml

mqtt:
  broker: !secret mqtt_broker
  port: !secret mqtt_port
  client_id: !secret mqtt_client_id
  keepalive: 60
  username: !secret mqtt_username
  password: !secret mqtt_password

frontend:
history:
logbook:
  exclude:
    entities:
      - sensor.date_time
      - sensor.logstore_uptime
      - sensor.sethbed_uptime
      - sun.sun

updater:
sun:
conversation:

device_tracker:
  - platform: unifi
    host: !secret unifi_host
    username: !secret unifi_username
    password: !secret unifi_password
    site_id: !secret unifi_site
    ssid_filter:
      - 'LYG Home'

camera: !include cameras.yaml

light: !include lights.yaml

binary_sensor: !include binary_sensors.yaml

group: !include groups.yaml

automation: !include automation.yaml

scene: !include scenes.yaml

zones: !include zones.yaml

notify:
  - name: slackbot
    platform: slack
    api_key: !secret slackbot_ha_api_key
    default_channel: '#general'

# climate:
#  platform: honeywell
#  username: !secret evohome_username
#  password: !secret evohome_password

stream:

tplink:
  discovery: false
  switch:

    # HS100-1
    # EEA7
    # ac:84:c6:fc:ee:a7
    # hair straigtners
    - host: 10.76.16.13

    # HS100-2
    # 55D5
    # ac:84:c6:59:55:d5
    # christmas tree
    - host: 10.76.16.14

    # HS100-3
    # 57B4
    # ac:84:c6:59:57:b4
    # lounge light
    - host: 10.76.16.16

    # HS100-4
    # 2496
    # ac:84:c6:69:24:96
    # garland
    - host: 10.76.16.19

fastdotcom:
  scan_interval:
      minutes: 30

speedtestdotnet:
  scan_interval:
    minutes: 30
  monitored_conditions:
    - ping
    - download
    - upload

system_health:

switch: !include switches.yaml

script:
  sethbed_service_reset:
    sequence:
      - service: mqtt.publish
        data_template:
          topic: 'tractorbed/seth/service/cmnd/reset'
          payload: 'RESET'
  sethbed_nightmode_toggle:
    sequence:
      - service: mqtt.publish
        data_template:
          topic: 'tractorbed/seth/mode/nightmode'
          payload: 'TOGGLE'

ios:

influxdb:
    host: influxdb.home.nat.ms
    port: 8086
    database: homeassistant
    max_retries: 3
    default_measurement: state
